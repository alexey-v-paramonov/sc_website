# SPA Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User Browser                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Hugo Static Site                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ list.html   â”‚  â”‚ single.html  â”‚  â”‚  static assets  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ (Catalog)   â”‚  â”‚  (Detail)    â”‚  â”‚  (CSS, flags)   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   SPA JavaScript Layer                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚            catalog-spa.js (15KB)                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Routing & History                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Search (debounced 500ms)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Filters (genre, country, region, city, lang)   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Sorting (rating, votes, date)                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Pagination                                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ API Communication                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ DOM Manipulation                                â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                             â”‚                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚            catalog.js (Audio Player)                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Audio playback                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Visualizer                                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Volume control                                   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    catalog-spa.css                        â”‚ â”‚
â”‚  â”‚  â€¢ Responsive layout                                      â”‚ â”‚
â”‚  â”‚  â€¢ UI components                                          â”‚ â”‚
â”‚  â”‚  â€¢ Animations                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTPS/JSON
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend API Server                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     GET /api/v1/catalog/                                  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Query Parameters:                                        â”‚ â”‚
â”‚  â”‚    â€¢ page, per_page                                      â”‚ â”‚
â”‚  â”‚    â€¢ search                                              â”‚ â”‚
â”‚  â”‚    â€¢ sort (rating|votes|created)                        â”‚ â”‚
â”‚  â”‚    â€¢ genre, country, region, city, language             â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Response:                                               â”‚ â”‚
â”‚  â”‚    â€¢ total, total_pages, current_page                   â”‚ â”‚
â”‚  â”‚    â€¢ results[] (radio station objects)                  â”‚ â”‚
â”‚  â”‚    â€¢ filters{} (available filter options)               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      Database                             â”‚ â”‚
â”‚  â”‚  â€¢ Radio stations                                         â”‚ â”‚
â”‚  â”‚  â€¢ Genres, countries, regions, cities                    â”‚ â”‚
â”‚  â”‚  â€¢ Streams, ratings, votes                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### 1. Initial Page Load

```
User navigates to /en/catalog/
         â”‚
         â–¼
Hugo serves static list.html
         â”‚
         â–¼
Browser loads catalog-spa.js
         â”‚
         â–¼
SPA initializes (setupListView)
         â”‚
         â–¼
SPA injects search/filter controls
         â”‚
         â–¼
User sees catalog with controls
```

### 2. Search Flow

```
User types "rock" in search box
         â”‚
         â–¼
Input event fired
         â”‚
         â–¼
Debounce timer started (500ms)
         â”‚
         â–¼
User continues typing...
         â”‚
         â–¼
Timer resets on each keystroke
         â”‚
         â–¼
User stops typing
         â”‚
         â–¼
500ms elapses
         â”‚
         â–¼
API call: GET /api/v1/catalog/?search=rock
         â”‚
         â–¼
Show loading spinner
         â”‚
         â–¼
API response received
         â”‚
         â–¼
Parse JSON response
         â”‚
         â–¼
Update catalogData
         â”‚
         â–¼
Re-render catalog grid
         â”‚
         â–¼
Update pagination
         â”‚
         â–¼
Hide loading spinner
         â”‚
         â–¼
User sees filtered results
```

### 3. Filter Flow

```
User selects Country: "United States"
         â”‚
         â–¼
Change event fired
         â”‚
         â–¼
Update currentFilters.country
         â”‚
         â–¼
Reset dependent filters (region, city)
         â”‚
         â–¼
Reset currentPage to 1
         â”‚
         â–¼
API call with filters
         â”‚
         â–¼
Response includes filtered results + available filters
         â”‚
         â–¼
Update region/city dropdowns with new options
         â”‚
         â–¼
Re-render grid with filtered results
         â”‚
         â–¼
User sees results from USA only
```

### 4. Navigation Flow

```
User clicks on radio station card
         â”‚
         â–¼
Click event captured by SPA
         â”‚
         â–¼
preventDefault() to stop default link
         â”‚
         â–¼
Extract target URL path
         â”‚
         â–¼
Update browser URL with pushState()
         â”‚
         â–¼
currentView = 'detail'
         â”‚
         â–¼
Fetch detail page HTML via AJAX
         â”‚
         â–¼
Parse HTML response
         â”‚
         â–¼
Extract <main> content
         â”‚
         â–¼
Replace current <main> with new content
         â”‚
         â–¼
Inject back button
         â”‚
         â–¼
Execute inline scripts
         â”‚
         â–¼
User sees detail page with back button
         â”‚
         â–¼
User clicks back button or browser back
         â”‚
         â–¼
history.back() or popstate event
         â”‚
         â–¼
Detect list URL
         â”‚
         â–¼
Reload page to restore list view
         â”‚
         â–¼
User back at catalog list
```

## Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CatalogSPA Class                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º init()
         â”‚            â””â”€â–º setupListView()
         â”‚                â””â”€â–º injectListControls()
         â”‚                    â””â”€â–º attachListEventListeners()
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º loadCatalogData()
         â”‚            â”œâ”€â–º fetch(API)
         â”‚            â”œâ”€â–º updateFilterOptions()
         â”‚            â”œâ”€â–º renderCatalogGrid()
         â”‚            â””â”€â–º renderPagination()
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º navigateToDetail()
         â”‚            â”œâ”€â–º pushState()
         â”‚            â””â”€â–º loadDetailView()
         â”‚                â”œâ”€â–º fetch(detail page)
         â”‚                â”œâ”€â–º replaceContent()
         â”‚                â””â”€â–º addBackButton()
         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º handlePopState()
                      â””â”€â–º Detect view type
                          â”œâ”€â–º List: reload()
                          â””â”€â–º Detail: loadDetailView()
```

## State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CatalogSPA State                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  currentView: 'list' | 'detail'                       â”‚
â”‚  currentPage: 1                                       â”‚
â”‚  itemsPerPage: 30                                     â”‚
â”‚  catalogData: {                                       â”‚
â”‚    total: 150,                                        â”‚
â”‚    results: [...],                                    â”‚
â”‚    filters: {...}                                     â”‚
â”‚  }                                                     â”‚
â”‚  currentFilters: {                                    â”‚
â”‚    search: '',                                        â”‚
â”‚    genre: '',                                         â”‚
â”‚    country: '',                                       â”‚
â”‚    region: '',                                        â”‚
â”‚    city: '',                                          â”‚
â”‚    language: '',                                      â”‚
â”‚    sort: 'rating'                                     â”‚
â”‚  }                                                     â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Local State (in memory)
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º No localStorage
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º No sessionStorage
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Cleared on page reload
```

## API Request/Response Cycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. User action (search/filter/sort)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Build API URL with parameters          â”‚
â”‚   /api/v1/catalog/?search=rock&page=1   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. HTTP GET request
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Server  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Query database
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Return records
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Server  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Format JSON response
       â”‚    {total, results, filters}
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. Parse JSON
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Update UI                  â”‚
â”‚   â€¢ Clear old content        â”‚
â”‚   â€¢ Render new cards         â”‚
â”‚   â€¢ Update pagination        â”‚
â”‚   â€¢ Update filter options    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Dependencies

```
list.html
    â”‚
    â”œâ”€â”€â–º catalog-spa.css (styles)
    â”‚
    â”œâ”€â”€â–º catalog-spa.js (SPA logic)
    â”‚    â”œâ”€â”€â–º Depends on: DOM API
    â”‚    â”œâ”€â”€â–º Depends on: Fetch API
    â”‚    â”œâ”€â”€â–º Depends on: History API
    â”‚    â””â”€â”€â–º Creates: window.catalogSPA
    â”‚
    â””â”€â”€â–º catalog.js (audio player)
         â”œâ”€â”€â–º Depends on: Web Audio API
         â”œâ”€â”€â–º Uses: window.catalogSPA
         â””â”€â”€â–º Exports: initializeCatalogAudio()
```

## Browser History States

```
Initial:  /en/catalog/
          history.state: null
                â”‚
                â”‚ Click station
                â–¼
Detail:   /en/catalog/station-name/
          history.state: {view: 'detail', path: '...'}
                â”‚
                â”‚ Click back button
                â–¼
Back to:  /en/catalog/
          history.state: null
          (page reloads to restore state)
```

## Responsive Breakpoints

```
Mobile          Tablet          Desktop
< 768px         768-1024px      > 1024px
â”Œâ”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± â”‚         â”‚    ğŸ“±   â”‚     â”‚  ğŸ–¥ï¸          â”‚
â”‚     â”‚         â”‚         â”‚     â”‚              â”‚
â”‚ â–¢â–¢  â”‚         â”‚  â–¢â–¢â–¢â–¢   â”‚     â”‚  â–¢â–¢â–¢â–¢â–¢â–¢     â”‚
â”‚ â–¢â–¢  â”‚         â”‚  â–¢â–¢â–¢â–¢   â”‚     â”‚  â–¢â–¢â–¢â–¢â–¢â–¢     â”‚
â”‚ â–¢â–¢  â”‚         â”‚  â–¢â–¢â–¢â–¢   â”‚     â”‚  â–¢â–¢â–¢â–¢â–¢â–¢     â”‚
â”‚     â”‚         â”‚         â”‚     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1 column        2 columns       3-4 columns
Stacked         Grid 2x         Grid 3x or 4x
controls        controls        controls
```

## Event Flow Chart

```
User Event                    SPA Handler              API Call
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[Type search]  â”€â”€â”€â”€â”€â”€â”€â–º  onInput(debounced)  â”€â”€â”€â”€â”€â”€â–º  GET /api
                              â”‚                         â”‚
                              â”‚                         â–¼
                              â”‚                    [Response]
                              â”‚                         â”‚
                              â–¼                         â”‚
                         updateUI() â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


[Select filter] â”€â”€â”€â”€â”€â”€â–º  onChange()  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  GET /api
                              â”‚                         â”‚
                              â”‚                         â–¼
                              â”‚                    [Response]
                              â”‚                         â”‚
                              â–¼                         â”‚
                         updateUI() â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


[Click station] â”€â”€â”€â”€â”€â”€â–º  onClick()
                              â”‚
                              â”œâ”€â”€â–º preventDefault()
                              â”œâ”€â”€â–º pushState()
                              â”œâ”€â”€â–º fetch(detail)
                              â”‚       â”‚
                              â”‚       â–¼
                              â”‚  [HTML response]
                              â”‚       â”‚
                              â””â”€â”€â–º replaceContent()


[Browser back]  â”€â”€â”€â”€â”€â”€â–º  onPopState()
                              â”‚
                              â”œâ”€â”€â–º detect URL
                              â””â”€â”€â–º loadView()
```

---

**Note**: This diagram shows the logical architecture. Actual implementation may vary slightly based on browser capabilities and runtime conditions.
